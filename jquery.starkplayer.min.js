document.createElement("video");document.createElement("audio");(function(a){a.starkplayer={counter:0};a.fn.extend({starkplayer:function(b){var d={type:"",url:"",poster:"",youtubeid:"",width:"",height:"",autoplay:"false",buffertime:"10",smoothing:"false",border:"",bgcolor:"#ffffff",logo:"",quality:"default",aspectratio:"maintain",videoplayer:"videoplayer.swf",audioplayer:"audioplayer.swf",youtubeplayer:"youtubeplayer.swf",embed_callback:function(j,h,f,k,g,i,e){h.insertAfter(j);swfobject.embedSWF(f,h.attr("id"),i,e,"10.0.0",null,g,k,{id:h.attr("id"),name:h.attr("id")},function(l){if(l.success){j.remove()}else{h.remove()}})}};var b=a.extend(d,b);function c(e){var e=e.split("&").join("&amp;").split("<").join("&lt;").split('"').join("&quot;");var f=a("<div></div>").get(0);f.innerHTML='<a href="'+e+'">link</a>';return f.firstChild.href}return this.each(function(){var g=a.extend({},b);var j=a(this);j.hide();var k=a("<div></div>").attr("id","starkplayer-"+a.starkplayer.counter);a.starkplayer.counter++;if(g.url==""&&(j.get(0).tagName.toUpperCase()=="AUDIO")){if(j.attr("src")){g.url=c(j.attr("src"))}else{var f=j.find("source");if(f.length>0){var e=f.first();if(e.attr("src")){g.url=c(e.attr("src"))}}}if(g.type==""){g.type="audio"}}if(g.url==""&&(j.get(0).tagName.toUpperCase()=="VIDEO")){if(g.poster==""&&j.attr("poster")){g.poster=c(j.attr("poster"))}if(j.attr("src")){g.url=c(j.attr("src"))}else{var f=j.find("source");if(f.length>0){var e=f.first();if(e.attr("src")){g.url=c(e.attr("src"))}}}if(g.width==""&&j.attr("width")){g.width=j.attr("width")}if(g.height==""&&j.attr("height")){g.height=j.attr("height")}if(g.type==""){g.type="video"}}if(g.url==""&&j.get(0).tagName.toUpperCase()=="A"){if(j.attr("href")){g.url=c(j.attr("href"))}var m=j.find("img");if(m.length>0){var l=m.first();if(g.poster==""&&l.attr("src")){g.poster=c(l.attr("src"))}}}if(g.url==""&&j.get(0).tagName.toUpperCase()=="IFRAME"){if(j.attr("src")){g.url=c(j.attr("src"))}if(g.width==""&&j.attr("width")){g.width=j.attr("width")}if(g.height==""&&j.attr("height")){g.height=j.attr("height")}}if(g.type==""&&g.url!==""){var h=/[^\?\#]*\.(.*?)((\?|\#)+?.*)*$/i.exec(g.url)[1];if(g.url.match(/^http\:\/\/(www\.){0,1}youtube\.com\//)){g.type="youtube"}else{if(h=="mp4"||h=="m4v"||h=="flv"||h=="mpg"||h=="mpeg"||h=="mov"||h=="3gp"){g.type="video"}else{if(h=="mp3"){g.type="audio"}}}}if(g.youtubeid==""&&g.url!==""&&g.type=="youtube"){g.youtubeid=/.*(\/embed\/|\/v\/|[\?\&\#\!]v\=)([a-zA-Z0-9\_\-]*).*$/i.exec(g.url)[2]}if(g.type=="audio"){if(g.width==""){g.width="260"}if(g.height==""){g.height="30"}}j.bind("starkplayer.ready",function(){if(g.type!==""&&(g.type!=="youtube"&&g.url!==""||(g.type=="youtube"&&g.youtubeid!==""))){var p=a(this).css("display");a(this).css("display","block");if(g.width==""&&(g.type=="video"||g.type=="youtube")){g.width=a(this).width()}if(g.height==""&&(g.type=="video"||g.type=="youtube")){g.height=a(this).height()}a(this).css("display",p);if(g.type=="video"){var o=g.videoplayer;var n={url:g.url,width:g.width,height:g.height,poster:g.poster,autoplay:g.autoplay,buffertime:g.buffertime,smoothing:g.smoothing,border:g.border,logo:g.logo,aspectratio:g.aspectratio};var q={allowFullScreen:"true",menu:"false"}}else{if(g.type=="audio"){var o=g.audioplayer;var n={url:g.url,autoplay:g.autoplay,border:g.border};var q={menu:"false",bgcolor:g.bgcolor}}else{if(g.type=="youtube"){var o=g.youtubeplayer;var n={id:g.youtubeid,autoplay:g.autoplay,border:g.border,quality:g.quality,logo:g.logo};var q={allowFullScreen:"true",menu:"false"}}}}g.embed_callback(j,k,o,q,n,g.width,g.height);a(this).show()}else{a(this).show()}});if(g.type=="video"&&g.poster!==""&&(g.width==""||g.height==""||g.width<0||g.height<0)){var i=a("<img></img>").attr("src",g.poster);if(i.get(0).complete&&i.get(0).width>0){if(g.width==""||g.width<0){g.width=i.get(0).width}if(g.height==""||g.height<0){g.height=i.get(0).height}j.trigger("starkplayer.ready")}else{i.load(function(){if(g.width==""||g.width<0){g.width=this.width}if(g.height==""||g.height<0){g.height=this.height}j.trigger("starkplayer.ready")})}}else{if(g.type=="youtube"&&j.get(0).tagName=="IFRAME"&&j.get(0).document&&j.get(0).document.readyState!=="complete"){j.load(function(){j.trigger("starkplayer.ready")})}else{j.trigger("starkplayer.ready")}}})}})})(jQuery);